<svg viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Grid pattern (subtle) -->
  <defs>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#e2e8f0" stroke-width="1" opacity="0.3"/>
    </pattern>
    
    <!-- Arrow markers -->
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
    </marker>
    
    <!-- Gradient for devices -->
    <linearGradient id="deviceGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f1f5f9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#cbd5e1;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  
  <!-- Source Station -->
  <g transform="translate(80, 80)">
    <!-- Background box for visibility -->
    <rect x="-10" y="-10" width="90" height="90" rx="8" fill="#f8fafc" stroke="#64748b" stroke-width="1" opacity="0.9"/>
    
    <!-- Laptop screen -->
    <rect x="0" y="0" width="70" height="45" rx="4" fill="url(#deviceGradient)" stroke="#64748b" stroke-width="2"/>
    <rect x="5" y="5" width="60" height="30" rx="2" fill="#1e293b"/>
    <!-- Laptop base -->
    <ellipse cx="35" cy="50" rx="35" ry="6" fill="#64748b"/>
    <rect x="32" y="47" width="6" height="6" fill="#64748b"/>
    
    <!-- Label -->
    <text x="35" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">SRC ST</text>
  </g>
  
  <!-- Destination Station -->
  <g transform="translate(450, 80)">
    <!-- Background box for visibility -->
    <rect x="-10" y="-10" width="90" height="90" rx="8" fill="#f8fafc" stroke="#64748b" stroke-width="1" opacity="0.9"/>
    
    <!-- Laptop screen -->
    <rect x="0" y="0" width="70" height="45" rx="4" fill="url(#deviceGradient)" stroke="#64748b" stroke-width="2"/>
    <rect x="5" y="5" width="60" height="30" rx="2" fill="#1e293b"/>
    <!-- Laptop base -->
    <ellipse cx="35" cy="50" rx="35" ry="6" fill="#64748b"/>
    <rect x="32" y="47" width="6" height="6" fill="#64748b"/>
    
    <!-- Label -->
    <text x="35" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">DEST ST</text>
  </g>
  
  <!-- Timeline lines -->
  <line x1="115" y1="160" x2="115" y2="520" stroke="#64748b" stroke-width="3"/>
  <line x1="485" y1="160" x2="485" y2="520" stroke="#64748b" stroke-width="3"/>
  
  <!-- First frame transmission -->
  <g>
    <line x1="115" y1="200" x2="475" y2="250" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrowhead-blue)"/>
    <text x="270" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-style="italic" fill="#3b82f6">frame</text>
  </g>
  
  <!-- First ACK -->
  <g>
    <line x1="475" y1="270" x2="125" y2="320" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <text x="270" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-style="italic" fill="#10b981">ACK</text>
  </g>
  
  <!-- Retransmission frame -->
  <g>
    <line x1="115" y1="360" x2="475" y2="410" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrowhead-orange)"/>
    <text x="300" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-style="italic" fill="#f59e0b">retransmission frame</text>
  </g>
  
  <!-- Second ACK -->
  <g>
    <line x1="475" y1="430" x2="125" y2="480" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <text x="270" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-style="italic" fill="#10b981">ACK</text>
  </g>
  
  <!-- Earliest collision detection time indicator -->
  <g transform="translate(500, 190)">
    <rect x="0" y="0" width="90" height="80" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="45" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400e">earliest</text>
    <text x="45" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400e">collision</text>
    <text x="45" y="46" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400e">detection</text>
    <text x="45" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400e">time</text>
    
    <!-- Brace indicating the time span - properly positioned and oriented -->
    <path d="M -8 10 Q -15 10 -15 20 L -15 90 Q -15 100 -8 100" stroke="#f59e0b" stroke-width="2" fill="none"/>
  </g>
  
  <!-- Title -->
  <g transform="translate(300, 30)">
    <rect x="-130" y="-15" width="260" height="30" rx="6" fill="#ffffff" stroke="#64748b" stroke-width="1" opacity="0.95"/>
    <text x="0" y="5" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1e293b">Network Frame Transmission</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(30, 540)">
    <rect x="0" y="0" width="540" height="50" rx="8" fill="#f8fafc" stroke="#64748b" stroke-width="1" opacity="0.9"/>
    
    <line x1="15" y1="25" x2="45" y2="25" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrowhead-blue)"/>
    <text x="50" y="30" font-family="Arial, sans-serif" font-size="11" fill="#1e293b">Data Frame</text>
    
    <line x1="125" y1="25" x2="155" y2="25" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <text x="160" y="30" font-family="Arial, sans-serif" font-size="11" fill="#1e293b">Acknowledgment</text>
    
    <line x1="250" y1="25" x2="280" y2="25" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrowhead-orange)"/>
    <text x="285" y="30" font-family="Arial, sans-serif" font-size="11" fill="#1e293b">Retransmission</text>
    
    <rect x="380" y="15" width="18" height="20" rx="2" fill="#fef3c7" stroke="#f59e0b" stroke-width="1" stroke-dasharray="2,2"/>
    <text x="405" y="30" font-family="Arial, sans-serif" font-size="11" fill="#1e293b">Collision Detection</text>
  </g>
</svg>